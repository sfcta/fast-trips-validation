# fast-trips-validation

This repository contains scripts to transform both the transit On-Board Survey (OBS) and California Household Travel Survey (CHTS) to both [dyno-demand][demand-standard-url] and [dyno-path][dyno-path-url] formats. In addition, there are also scripts to process both survey data and Fast-Trips output data (in [dyno-path][dyno-path-url] format) and summarize them for calibration and validation purposes. These scripts create input files that can be plugged into Tableau Dashboards. All the scripts can be found in the [scripts](scripts/) directory of this repository.

[CHTS to DynoPath Conversion](#chts-to-dynopath-conversion)
[CHTS Validation DashBoard](#chts-validation-dashboard)

## CHTS to DynoPath Conversion

## CHTS Validation Dashboard

## Python Notebooks (old/deprecated)

### Generate Tableau Input

Tableau workbooks depend on 2 output files generated by **notebooks/prepare_fasttrips.ipynb**. The notebook reads a set of fast-trips standard outputs and a list of observed trips for comparison. Set the directory for these inputs ("OUTPUT_DIR" and "obs_links_dir") in the upper cells. (Note that observed records are not available on GitHub due to privacy restrictions.)

Outputs generated from the script include:
- path_comparison.csv
- chosenpath_links_with_observed.csv

Other configurations in the top cell include:
- "threshold"
    - only include paths above a given probability threshold 
- "comparison field"
    - when comparing trips, specify whether matches are based on modes, agencies, or routes

### Update Tableau

Download dashboard: https://public.tableau.com/profile/brice.nichols#!/vizhome/OBS-ValidationDRAFT/FastTripsOverview-OBS
Open with Tableau Public/Desktop.

Navigate to Data Source tab, and select "Edit Connection" under Connections pane. Point to the latest output from the notebooks. 
Update the location for "chosenpaths_links" and "path_comparison" data sources. "Path_intersection" is an additional output from the notebook that may be required to be updated as well, but is no longer used in the dashboard. 

[demand-standard-url]: <https://github.com/osplanning-data-standards/dyno-demand>
[dyno-path-url]: <https://github.com/osplanning-data-standards/dyno-path>
